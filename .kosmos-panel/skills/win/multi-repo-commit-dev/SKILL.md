---
name: multi-repo-commit-dev
description: Для списка фиксированных репозиториев проверяет ветку dev, коммитит изменения и делает push
params: []
---

## What I do

Я работаю с тремя фиксированными папками:
- C:\ERV\projects-ex\kosmos-model
- C:\ERV\projects-ex\kosmos-panel
- C:\ERV\projects-ex\kosmos-vector
- C:\ERV\projects-ex\kosmos-vector-UI

Для КАЖДОЙ папки по очереди:

1. Перехожу в папку: `cd /d <путь>`
2. Проверяю текущую ветку: `git branch --show-current`
3. Если ветка НЕ "dev":
   - Вывожу ошибку: "Ошибка в <папка>: текущая ветка — <ветка>, а нужна dev"
   - ПРОДОЛЖАЮ со следующей папкой (не останавливаюсь)
4. Если ветка "dev":
   - Проверяю статус: `git status --short`
   - Если статус пустой (нет изменений):
     - Вывожу: "В <папка>: нет изменений → пропускаем"
     - Перехожу к следующей папке
   - Если есть изменения:
     - Показываю вывод `git status`
     - Спрашиваю у пользователя: "Введи сообщение для коммита (или 'skip' чтобы пропустить эту папку):"
     - Если ответ "skip" или пустой → пропускаю папку
     - Иначе выполняю:
       - `git add .`
       - `git commit -m "<сообщение>"`
       - `git push origin dev`
5. После всех папок вывожу итог:
   - Сколько папок обработано
   - Сколько успешно закоммичено/запушено
   - Сколько пропущено (ошибка/нет изменений/skip)

## When to use me

Используй когда нужно быстро закоммитить и запушить изменения сразу во всех трёх проектах (kosmos-model, kosmos-vector, kosmos-vector-UI).

Триггеры:
- "commit all projects"
- "закоммитить все репозитории"
- "push dev во всех проектах"
- "multi commit dev"

## Rules

- НЕ использую `git push --force`
- Для КАЖДОЙ папки запрашиваю отдельное сообщение коммита
- Если в папке не ветка dev — ошибка, но продолжаю с остальными
- Если push отклонён — показываю ошибку и продолжаю
