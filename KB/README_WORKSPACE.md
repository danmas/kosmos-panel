# Рабочая панель (Workspace)

Новый основной интерфейс терминала, объединяющий управление сервером, логи и Skills в едином окне.

---

## Обзор

Рабочая панель (`workspace.html`) представляет собой "супер-терминал", разделенный на три функциональные зоны:

1.  **Основной терминал** (Справа): Полноценный SSH-терминал на базе xterm.js.
2.  **Панель логов** (Слева сверху): Просмотр истории команд и логов выполнения Skills.
3.  **Панель Skills** (Слева снизу): Список доступных сценариев автоматизации и интерфейс их выполнения.

Панель открывается из главного меню сервера: **"1. ⚡ Рабочая панель (супер-терминал)"**.

---

## Функциональность

### 1. Управление макетом (Layout)
- **Resizable Panels**: Границы между панелями можно перетаскивать мышью для изменения их размера.
- **Сохранение**: Настройки размеров панелей автоматически сохраняются в `localStorage` браузера и восстанавливаются при следующем открытии.

### 2. Терминал (Terminal)
- Полная поддержка всех функций базового терминала (WebSocket, AI-команды `ai:`, копирование/вставка).
- Интеграция с Skills: при запуске Skill взаимодействие происходит в фокусе, но терминал остается доступен.

### 3. Логи (Logs)
Панель логов имеет две вкладки:
- **Terminal**: История выполненных команд (stdin/stdout/stderr) и AI-запросов.
- **Skills**: Подробный лог выполнения сценариев (шаги, ответы, результаты).

Фильтры позволяют быстро найти нужную информацию (например, только ошибки или только AI-запросы).

### 4. Skills (Сценарии)
- **Список**: Древовидный список доступных Skills (локальные и удаленные).
- **Интегрированный диалог**: Запуск и выполнение Skill происходит прямо в панели (вместо всплывающих окон), что позволяет видеть контекст терминала и логов одновременно.
- **История**: Быстрый доступ к последним запущенным сценариям.

---

## Технические детали

- **URL**: `/workspace.html?serverId=<ID>`
- **Зависимости**:
    - `xterm.js` + `xterm-addon-fit`: Для терминала.
    - `workspace.js`: Основная логика (менеджер панелей, WebSocket клиент, UI обработчики).
    - `workspace.css`: Стилизация (Dark Theme, Grid Layout).
- **API**: Использует стандартные API сервера (`/api/logs`, `/api/skills`, `/ws/terminal`).

---

## Отличия от старого терминала (`term.html`)

| Функция | Workspace (`workspace.html`) | Legacy Terminal (`term.html`) |
|---------|------------------------------|-------------------------------|
| **Макет** | 3 панели (Terminal, Logs, Skills) | 1 панель (Terminal) + Popups |
| **Skills** | Встроены в интерфейс | Всплывающие модальные окна |
| **Логи** | Всегда видны (отдельная панель) | Требуется открытие отдельной вкладки |
| **Окна** | Единое окно | Поддержка отдельных окон (удалено в v2) |
